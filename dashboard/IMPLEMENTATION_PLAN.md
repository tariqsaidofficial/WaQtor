# ğŸ“‹ Ø®Ø·Ø© Ø§Ù„ØªÙ†ÙÙŠØ° Ø§Ù„Ø´Ø§Ù…Ù„Ø© - WaQtor Dashboard

## ğŸ¯ **Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø©:**

ØªÙ… ÙØ­Øµ Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯Ø© ÙˆØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨. Ø§Ù„Ø®Ø·Ø© Ù…Ù‚Ø³Ù…Ø© Ø¥Ù„Ù‰ **7 Ù…Ø±Ø§Ø­Ù„** Ù…Ù†Ø¸Ù…Ø©.

---

## ğŸ“Š **Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯Ø© Ø­Ø§Ù„ÙŠØ§Ù‹:**

### âœ… **Ø§Ù„ØµÙØ­Ø§Øª Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©:**
```
/app/(main)/
â”œâ”€â”€ dashboard/          âœ… Ù…ÙˆØ¬ÙˆØ¯Ø© (Prime Dashboard)
â”œâ”€â”€ campaigns/          âœ… Ù…ÙˆØ¬ÙˆØ¯Ø©
â”œâ”€â”€ messages/           âœ… Ù…ÙˆØ¬ÙˆØ¯Ø©
â”œâ”€â”€ smartbot/           âœ… Ù…ÙˆØ¬ÙˆØ¯Ø©
â”œâ”€â”€ interactive/        âœ… Ù…ÙˆØ¬ÙˆØ¯Ø©
â”œâ”€â”€ reports/            âœ… Ù…ÙˆØ¬ÙˆØ¯Ø©
â””â”€â”€ settings/           âœ… Ù…ÙˆØ¬ÙˆØ¯Ø©
```

### âœ… **ØµÙØ­Ø§Øª Full-Page:**
```
/app/(full-page)/
â”œâ”€â”€ auth/
â”‚   â”œâ”€â”€ login/          âœ… Ù…ÙˆØ¬ÙˆØ¯Ø©
â”‚   â”œâ”€â”€ access/         âœ… Ù…ÙˆØ¬ÙˆØ¯Ø©
â”‚   â””â”€â”€ error/          âœ… Ù…ÙˆØ¬ÙˆØ¯Ø©
â”œâ”€â”€ landing/            âœ… Ù…ÙˆØ¬ÙˆØ¯Ø©
â””â”€â”€ pages/
    â””â”€â”€ notfound/       âœ… Ù…ÙˆØ¬ÙˆØ¯Ø©
```

### âœ… **UI Components:**
```
/app/(main)/uikit/
â”œâ”€â”€ button/             âœ… Ù…ÙˆØ¬ÙˆØ¯Ø©
â”œâ”€â”€ charts/             âœ… Ù…ÙˆØ¬ÙˆØ¯Ø©
â”œâ”€â”€ file/               âœ… Ù…ÙˆØ¬ÙˆØ¯Ø©
â”œâ”€â”€ formlayout/         âœ… Ù…ÙˆØ¬ÙˆØ¯Ø©
â”œâ”€â”€ input/              âœ… Ù…ÙˆØ¬ÙˆØ¯Ø©
â”œâ”€â”€ message/            âœ… Ù…ÙˆØ¬ÙˆØ¯Ø©
â””â”€â”€ table/              âœ… Ù…ÙˆØ¬ÙˆØ¯Ø©
```

---

## ğŸš€ **Ø§Ù„Ù…Ø±Ø§Ø­Ù„ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©:**

---

### **Ø§Ù„Ù…Ø±Ø­Ù„Ø© 1ï¸âƒ£: ØªØ­Ø¯ÙŠØ«Ø§Øª Topbar** âœ… (Ù…ÙƒØªÙ…Ù„Ø©)

#### **Ø§Ù„Ù…Ø·Ù„ÙˆØ¨:**
- [x] ØªØ­Ø±ÙŠÙƒ Ø²Ø± Menu Toggle Ø£ÙƒØ«Ø± Ù„Ù„ÙŠØ³Ø§Ø±
- [x] Profile dropdown Ù…Ø¹ Avatar
- [x] Quick Actions panel
- [x] **ØªØ­Ø³ÙŠÙ† Avatar System:**
  - [x] Ø§Ø³ØªØ®Ø¯Ø§Ù… Label + Circle Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø¨Ø¯ÙˆÙ† ØµÙˆØ±Ø©
  - [x] Ø§Ø³ØªØ®Ø¯Ø§Ù… Image + Circle Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø¨ØµÙˆØ±Ø©
  - [x] Ø¯Ø¹Ù… Gravatar
  - [x] Ø¥Ø¶Ø§ÙØ© Badge Ù„Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª

#### **Ø§Ù„Ù…Ù„ÙØ§Øª:**
```
âœ… /components/layout/AppTopbar.tsx
âœ… /components/ui/layout/_topbar.scss
```

#### **Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨:**
```typescript
// Avatar Ø¨Ø¯ÙˆÙ† ØµÙˆØ±Ø© (Label + Circle)
<Avatar 
    label={userName.charAt(0).toUpperCase()} 
    shape="circle"
    size="large"
    style={{ backgroundColor: '#0f766e', color: '#ffffff' }}
/>

// Avatar Ø¨ØµÙˆØ±Ø© (Image + Circle)
<Avatar 
    image={userAvatar}
    shape="circle"
    size="large"
/>

// Avatar Ù…Ø¹ Badge
<Avatar 
    label="U" 
    size="xlarge" 
    className="p-overlay-badge"
    shape="circle"
>
    <Badge value="4" severity="danger" />
</Avatar>
```

---

### **Ø§Ù„Ù…Ø±Ø­Ù„Ø© 2ï¸âƒ£: Ø¥Ù†Ø´Ø§Ø¡ ØµÙØ­Ø© Profile** âœ… (Ù…ÙƒØªÙ…Ù„Ø©)

#### **Ø§Ù„Ù…Ø·Ù„ÙˆØ¨:**
- [x] Ø¥Ù†Ø´Ø§Ø¡ `/app/(main)/profile/page.tsx`
- [x] ØªØµÙ…ÙŠÙ… ØµÙØ­Ø© Profile Ø§Ø­ØªØ±Ø§ÙÙŠØ©
- [x] Ø¥Ø¶Ø§ÙØ© Avatar Ù…Ø¹ Ø¥Ù…ÙƒØ§Ù†ÙŠØ© Ø±ÙØ¹ ØµÙˆØ±Ø©
- [x] Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… (Ø§Ù„Ø§Ø³Ù…ØŒ Ø§Ù„Ø¨Ø±ÙŠØ¯ØŒ Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ)
- [x] Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø­Ø³Ø§Ø¨
- [x] ØªØ§Ø±ÙŠØ® Ø§Ù„Ù†Ø´Ø§Ø·

#### **Ø§Ù„Ù…ÙƒÙˆÙ†Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©:**
```typescript
- Avatar (Image/Label + Circle)
- FileUpload (Ù„Ø±ÙØ¹ Ø§Ù„ØµÙˆØ±Ø©)
- InputText (Ù„Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª)
- Button (Ø­ÙØ¸/Ø¥Ù„ØºØ§Ø¡)
- Card (Ù„ØªÙ†Ø¸ÙŠÙ… Ø§Ù„Ø£Ù‚Ø³Ø§Ù…)
- Divider (Ù„Ù„ÙØµÙ„ Ø¨ÙŠÙ† Ø§Ù„Ø£Ù‚Ø³Ø§Ù…)
```

#### **Ø§Ù„Ù…Ù„ÙØ§Øª:**
```
ğŸ“ /app/(main)/profile/
â”œâ”€â”€ page.tsx           (Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©)
â””â”€â”€ profile.css        (Ø§Ù„ØªÙ†Ø³ÙŠÙ‚Ø§Øª)
```

---

### **Ø§Ù„Ù…Ø±Ø­Ù„Ø© 3ï¸âƒ£: Ø¥Ù†Ø´Ø§Ø¡ ØµÙØ­Ø© About**

#### **Ø§Ù„Ù…Ø·Ù„ÙˆØ¨:**
- [ ] Ø¥Ù†Ø´Ø§Ø¡ `/app/(main)/about/page.tsx`
- [ ] Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¹Ù† Ø§Ù„Ù†Ø¸Ø§Ù… (WaQtor)
- [ ] Documentation links
- [ ] FAQ section
- [ ] ØªØ¹Ù„ÙŠÙ…Ø§Øª Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…
- [ ] Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø¥ØµØ¯Ø§Ø±
- [ ] Ø±ÙˆØ§Ø¨Ø· Ø§Ù„Ø¯Ø¹Ù…

#### **Ø§Ù„Ø£Ù‚Ø³Ø§Ù…:**
```
1. About WaQtor
   - Ù†Ø¨Ø°Ø© Ø¹Ù† Ø§Ù„Ù†Ø¸Ø§Ù…
   - Ø§Ù„Ù…ÙŠØ²Ø§Øª Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
   - Ø§Ù„Ø¥ØµØ¯Ø§Ø± Ø§Ù„Ø­Ø§Ù„ÙŠ

2. Documentation
   - Quick Start Guide
   - API Documentation
   - User Manual

3. FAQ
   - Ø£Ø³Ø¦Ù„Ø© Ø´Ø§Ø¦Ø¹Ø©
   - Accordion component

4. Support
   - Ø±ÙˆØ§Ø¨Ø· Ø§Ù„ØªÙˆØ§ØµÙ„
   - GitHub Issues
   - Email Support
```

#### **Ø§Ù„Ù…Ù„ÙØ§Øª:**
```
ğŸ“ /app/(main)/about/
â”œâ”€â”€ page.tsx           (Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©)
â””â”€â”€ about.css          (Ø§Ù„ØªÙ†Ø³ÙŠÙ‚Ø§Øª)
```

---

### **Ø§Ù„Ù…Ø±Ø­Ù„Ø© 4ï¸âƒ£: Ù†Ø¸Ø§Ù… BlockUI Ù„Ù„ØµÙØ­Ø§Øª Ø§Ù„Ù…Ø­Ù…ÙŠØ©** âœ… (Ù…ÙƒØªÙ…Ù„Ø©)

#### **Ø§Ù„Ù…Ø·Ù„ÙˆØ¨:**
- [x] ØªØ·Ø¨ÙŠÙ‚ BlockUI Ø¹Ù„Ù‰ 3 ØµÙØ­Ø§Øª:
  - `/campaigns`
  - `/reports`
  - `/interactive`
- [x] Ø¥Ø¶Ø§ÙØ© Ù†Ø§ÙØ°Ø© InputOtp Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ·
- [x] Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ÙƒÙˆØ¯ (1234 Ù…Ø¤Ù‚ØªØ§Ù‹)
- [x] Ø­ÙØ¸ Ø­Ø§Ù„Ø© Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ ÙÙŠ localStorage

#### **Ø§Ù„ÙƒÙˆØ¯:**
```typescript
// BlockUI Template
<BlockUI 
    blocked={!isSubscribed} 
    template={
        <div className="block-ui-template">
            <i className="pi pi-lock" style={{ fontSize: '3rem' }}></i>
            <h3>Premium Feature</h3>
            <p>Subscribe or enter access code</p>
        </div>
    }
>
    {/* Ù…Ø­ØªÙˆÙ‰ Ø§Ù„ØµÙØ­Ø© */}
</BlockUI>

// InputOtp Dialog
<Dialog visible={showOtpDialog} onHide={() => setShowOtpDialog(false)}>
    <h3>Enter Access Code</h3>
    <InputOtp 
        value={otp} 
        onChange={(e) => setOtp(e.value)} 
        mask 
        length={4}
    />
    <Button 
        label="Verify" 
        onClick={verifyOtp}
    />
</Dialog>
```

#### **Ø§Ù„Ù…Ù„ÙØ§Øª:**
```
ğŸ“ /components/BlockUI/
â”œâ”€â”€ ProtectedPage.tsx  (Ù…ÙƒÙˆÙ† Ù‚Ø§Ø¨Ù„ Ù„Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…)
â””â”€â”€ OtpDialog.tsx      (Ù†Ø§ÙØ°Ø© Ø§Ù„Ù€ OTP)
```

---

### **Ø§Ù„Ù…Ø±Ø­Ù„Ø© 5ï¸âƒ£: Ø¥Ø¶Ø§ÙØ© Tag "New" Ù„Ù„ØµÙØ­Ø§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©** âœ… (Ù…ÙƒØªÙ…Ù„Ø©)

#### **Ø§Ù„Ù…Ø·Ù„ÙˆØ¨:**
- [x] Ø¥Ø¶Ø§ÙØ© Tag "New" ÙÙŠ Sidebar Menu
- [x] ØªØ·Ø¨ÙŠÙ‚ Ø¹Ù„Ù‰ 3 ØµÙØ­Ø§Øª:
  - Campaigns
  - Reports
  - Interactive

#### **Ø§Ù„ÙƒÙˆØ¯:**
```typescript
// ÙÙŠ AppMenu.tsx
{
    label: 'Campaigns',
    icon: 'pi pi-fw pi-megaphone',
    to: '/campaigns',
    badge: 'New',
    badgeClass: 'p-badge-success'
}
```

#### **Ø§Ù„Ù…Ù„ÙØ§Øª:**
```
âœï¸ /components/layout/AppMenu.tsx
âœï¸ /components/layout/AppMenuitem.tsx (Ø¥Ø¶Ø§ÙØ© Ø¯Ø¹Ù… Badge)
```

---

### **Ø§Ù„Ù…Ø±Ø­Ù„Ø© 6ï¸âƒ£: Ø¥Ø¶Ø§ÙØ© ScrollTop Ù„Ù„ØªØ·Ø¨ÙŠÙ‚** âœ… (Ù…ÙƒØªÙ…Ù„Ø©)

#### **Ø§Ù„Ù…Ø·Ù„ÙˆØ¨:**
- [x] Ø¥Ø¶Ø§ÙØ© ScrollTop component ÙÙŠ Layout Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ
- [x] ÙŠØ¸Ù‡Ø± Ø¹Ù†Ø¯ Ø§Ù„ØªÙ…Ø±ÙŠØ± Ù„Ø£Ø³ÙÙ„
- [x] ØªØµÙ…ÙŠÙ… Ù…ØªÙ†Ø§Ø³Ù‚ Ù…Ø¹ Ø§Ù„Ø«ÙŠÙ…

#### **Ø§Ù„ÙƒÙˆØ¯:**
```typescript
// ÙÙŠ layout.tsx
<ScrollTop 
    threshold={400}
    icon="pi pi-arrow-up"
    className="custom-scrolltop"
/>
```

#### **Ø§Ù„Ù…Ù„ÙØ§Øª:**
```
âœï¸ /app/(main)/layout.tsx
ğŸ“ /components/ui/layout/_scrolltop.scss
```

---

### **Ø§Ù„Ù…Ø±Ø­Ù„Ø© 7ï¸âƒ£: ØªØ­Ø³ÙŠÙ† UI Components**

#### **Ø§Ù„Ù…Ø·Ù„ÙˆØ¨:**
- [ ] Ø¥Ø¶Ø§ÙØ© ØµÙØ­Ø© Badge ÙÙŠ UIKit
- [ ] Ø¥Ø¶Ø§ÙØ© ØµÙØ­Ø© Tag ÙÙŠ UIKit
- [ ] Ø¥Ø¶Ø§ÙØ© ØµÙØ­Ø© Chip ÙÙŠ UIKit
- [ ] Ø¥Ø¶Ø§ÙØ© ØµÙØ­Ø© Avatar ÙÙŠ UIKit
- [ ] ØªØ­Ø³ÙŠÙ† ØµÙØ­Ø§Øª Auth Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯Ø©
- [ ] ØªØ­Ø³ÙŠÙ† ØµÙØ­Ø© Landing
- [ ] ØªØ­Ø³ÙŠÙ† ØµÙØ­Ø© NotFound

#### **Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©:**
```
ğŸ“ /app/(main)/uikit/
â”œâ”€â”€ badge/
â”‚   â””â”€â”€ page.tsx
â”œâ”€â”€ tag/
â”‚   â””â”€â”€ page.tsx
â”œâ”€â”€ chip/
â”‚   â””â”€â”€ page.tsx
â””â”€â”€ avatar/
    â””â”€â”€ page.tsx
```

---

## ğŸ“¦ **Ø§Ù„Ù…ÙƒÙˆÙ†Ø§Øª Ø§Ù„Ù…Ø´ØªØ±ÙƒØ© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©:**

### **1. ProtectedPage Component:**
```typescript
interface ProtectedPageProps {
    children: React.ReactNode;
    requireSubscription?: boolean;
    accessCode?: string;
}
```

### **2. OtpDialog Component:**
```typescript
interface OtpDialogProps {
    visible: boolean;
    onHide: () => void;
    onVerify: (code: string) => void;
}
```

### **3. PageHeader Component:**
```typescript
interface PageHeaderProps {
    title: string;
    subtitle?: string;
    badge?: string;
    actions?: React.ReactNode;
}
```

---

## ğŸ¨ **Ø§Ù„ØªØµÙ…ÙŠÙ… Ø§Ù„Ù…ÙˆØ­Ø¯:**

### **Ø§Ù„Ø£Ù„ÙˆØ§Ù†:**
```scss
$primary: #0f766e;        // WhatsApp green
$success: #16a34a;        // Green
$warning: #f59e0b;        // Orange
$danger: #ef4444;         // Red
$info: #3b82f6;           // Blue
```

### **Ø§Ù„Ù…Ø³Ø§ÙØ§Øª:**
```scss
$spacing-xs: 0.25rem;     // 4px
$spacing-sm: 0.5rem;      // 8px
$spacing-md: 1rem;        // 16px
$spacing-lg: 1.5rem;      // 24px
$spacing-xl: 2rem;        // 32px
```

### **Border Radius:**
```scss
$border-radius-sm: 6px;
$border-radius-md: 12px;
$border-radius-lg: 16px;
```

---

## ğŸ“ **LocalStorage Keys:**

```typescript
// User Settings
user_name: string
user_avatar: string
user_email: string
user_phone: string

// Branding
app_logo: string
app_logo_text: string
app_show_logo_text: boolean

// Subscriptions
subscription_status: boolean
subscription_expiry: string
access_codes: string[]

// UI Preferences
theme: string
compact_mode: boolean
sidebar_collapsed: boolean
```

---

## ğŸ”„ **ØªØ±ØªÙŠØ¨ Ø§Ù„ØªÙ†ÙÙŠØ° Ø§Ù„Ù…Ù‚ØªØ±Ø­:**

```
1. âœ… Ø§Ù„Ù…Ø±Ø­Ù„Ø© 1: ØªØ­Ø³ÙŠÙ† Topbar Avatar (30 Ø¯Ù‚ÙŠÙ‚Ø©)
2. ğŸ“ Ø§Ù„Ù…Ø±Ø­Ù„Ø© 6: Ø¥Ø¶Ø§ÙØ© ScrollTop (15 Ø¯Ù‚ÙŠÙ‚Ø©)
3. ğŸ“ Ø§Ù„Ù…Ø±Ø­Ù„Ø© 5: Ø¥Ø¶Ø§ÙØ© Tag "New" (20 Ø¯Ù‚ÙŠÙ‚Ø©)
4. ğŸ“ Ø§Ù„Ù…Ø±Ø­Ù„Ø© 4: Ù†Ø¸Ø§Ù… BlockUI (45 Ø¯Ù‚ÙŠÙ‚Ø©)
5. ğŸ“ Ø§Ù„Ù…Ø±Ø­Ù„Ø© 3: ØµÙØ­Ø© About (60 Ø¯Ù‚ÙŠÙ‚Ø©)
6. ğŸ“ Ø§Ù„Ù…Ø±Ø­Ù„Ø© 2: ØµÙØ­Ø© Profile (60 Ø¯Ù‚ÙŠÙ‚Ø©)
7. ğŸ“ Ø§Ù„Ù…Ø±Ø­Ù„Ø© 7: ØªØ­Ø³ÙŠÙ† UI Components (90 Ø¯Ù‚ÙŠÙ‚Ø©)
```

**Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…Ù‚Ø¯Ø±:** ~5 Ø³Ø§Ø¹Ø§Øª

---

## âœ… **Checklist Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ:**

### **Topbar:**
- [ ] ØªØ­Ø±ÙŠÙƒ Menu Toggle
- [ ] Avatar Ù…Ø¹ Label/Image
- [ ] Badge Ù„Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª
- [ ] Gravatar support

### **Sidebar:**
- [ ] Ø¥Ø¶Ø§ÙØ© Profile
- [ ] Ø¥Ø¶Ø§ÙØ© About
- [ ] Tag "New" Ø¹Ù„Ù‰ Ø§Ù„ØµÙØ­Ø§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©

### **Protected Pages:**
- [ ] BlockUI Ø¹Ù„Ù‰ Campaigns
- [ ] BlockUI Ø¹Ù„Ù‰ Reports
- [ ] BlockUI Ø¹Ù„Ù‰ Interactive
- [ ] OTP Dialog
- [ ] Subscription check

### **Global:**
- [ ] ScrollTop component
- [ ] Unified theme colors
- [ ] LocalStorage integration

### **UI Components:**
- [ ] Badge page
- [ ] Tag page
- [ ] Chip page
- [ ] Avatar page

---

## **Ø§Ù„Ù…Ø±Ø­Ù„Ø© 6ï¸âƒ£: Notification System** ğŸ””

### **Backend:**
- [ ] API Endpoints:
  - `GET /api/notifications` - Ø¬Ù„Ø¨ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª
  - `POST /api/notifications/mark-read/:id` - ØªØ­Ø¯ÙŠØ¯ ÙƒÙ…Ù‚Ø±ÙˆØ¡
  - `POST /api/notifications/mark-all-read` - ØªØ­Ø¯ÙŠØ¯ Ø§Ù„ÙƒÙ„ ÙƒÙ…Ù‚Ø±ÙˆØ¡
  - `DELETE /api/notifications/:id` - Ø­Ø°Ù Ø¥Ø´Ø¹Ø§Ø±
  - `GET /api/notifications/count` - Ø¹Ø¯Ø¯ ØºÙŠØ± Ø§Ù„Ù…Ù‚Ø±ÙˆØ¡Ø©

- [ ] Database Schema:
  ```typescript
  interface Notification {
      id: string;
      userId: string;
      type: 'info' | 'success' | 'warning' | 'error';
      title: string;
      message: string;
      icon?: string;
      link?: string;
      read: boolean;
      createdAt: Date;
  }
  ```

- [ ] WebSocket (Optional):
  - Real-time notifications
  - Socket.io integration
  - Event: `notification:new`

### **Frontend:**
- [ ] Components:
  - `NotificationBell.tsx` - Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø§Ù„Ø¬Ø±Ø³ Ù…Ø¹ Badge
  - `NotificationDropdown.tsx` - Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª
  - `NotificationItem.tsx` - Ø¹Ù†ØµØ± Ø¥Ø´Ø¹Ø§Ø± ÙˆØ§Ø­Ø¯
  - `NotificationCenter.tsx` - ØµÙØ­Ø© ÙƒØ§Ù…Ù„Ø© Ù„Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª

- [ ] Features:
  - [ ] Ø¹Ø±Ø¶ Ø¹Ø¯Ø¯ ØºÙŠØ± Ø§Ù„Ù…Ù‚Ø±ÙˆØ¡Ø© ÙÙŠ Badge
  - [ ] Dropdown menu Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ·
  - [ ] Mark as read (single/all)
  - [ ] Delete notification
  - [ ] Filter (all/unread)
  - [ ] Pagination
  - [ ] Real-time updates (WebSocket)
  - [ ] Sound notification (optional)
  - [ ] Desktop notification (optional)

- [ ] UI/UX:
  - [ ] Animation Ø¹Ù†Ø¯ ÙˆØµÙˆÙ„ Ø¥Ø´Ø¹Ø§Ø± Ø¬Ø¯ÙŠØ¯
  - [ ] Different icons per type
  - [ ] Time ago (e.g., "5 minutes ago")
  - [ ] Empty state
  - [ ] Loading state
  - [ ] Error handling

### **Integration:**
- [ ] AppTopbar.tsx:
  - Replace static Badge with real data
  - Add NotificationBell component
  
- [ ] Context/Store:
  - NotificationContext or Zustand store
  - Global state management
  
- [ ] API Integration:
  - Fetch notifications on mount
  - Poll every X seconds OR WebSocket
  - Update count in real-time

### **Ø§Ù„Ù…Ù„ÙØ§Øª:**
```
ğŸ“ /components/Notifications/
â”œâ”€â”€ NotificationBell.tsx
â”œâ”€â”€ NotificationDropdown.tsx
â”œâ”€â”€ NotificationItem.tsx
â””â”€â”€ NotificationCenter.tsx

ğŸ“ /app/(main)/notifications/
â””â”€â”€ page.tsx

ğŸ“ /api/notifications/
â”œâ”€â”€ route.ts (GET, POST)
â”œâ”€â”€ [id]/route.ts (DELETE, PATCH)
â””â”€â”€ count/route.ts (GET)

ğŸ“ /contexts/
â””â”€â”€ NotificationContext.tsx

ğŸ“ /hooks/
â””â”€â”€ useNotifications.ts
```

---

## ğŸ—ï¸ **Ø§Ù„Ù…Ø±Ø­Ù„Ø© 8ï¸âƒ£: Architecture Evolution - Ù…Ù† Monolith Ø¥Ù„Ù‰ Modular Microkernel**

### **ğŸ¯ Ø§Ù„Ø£Ù‡Ø¯Ø§Ù:**
- âœ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø­Ø±Ùƒ Ø¨Ø¯ÙˆÙ† ÙƒØ³Ø± Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© (Backward Compatibility)
- âœ… Ø¯Ø¹Ù… Multi-Instance Ù…Ø³ØªÙ‚Ø¨Ù„Ø§Ù‹
- âœ… Ù†Ø´Ø± SDK Ø±Ø³Ù…ÙŠ (Node.js + Python)
- âœ… ÙØµÙ„ Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ÙŠØ§Øª (Separation of Concerns)
- âœ… Ù‚Ø§Ø¨Ù„ÙŠØ© Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± ÙˆØ§Ù„ØµÙŠØ§Ù†Ø©

---

### **ğŸ“¦ Ø§Ù„Ù‡ÙŠÙƒÙ„ Ø§Ù„Ù…Ù‚ØªØ±Ø­ (Mono-Repo):**

```
waqtor/
â”œâ”€ packages/
â”‚  â”œâ”€ core/                 # @waqtor/core  â† Ø§Ù„Ù…Ø­Ø±Ùƒ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ
â”‚  â”‚  â”œâ”€ src/
â”‚  â”‚  â”‚  â”œâ”€ engine/         # WhatsAppClient, SessionManager, EventBus
â”‚  â”‚  â”‚  â”œâ”€ campaigns/      # CampaignEngine (Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ø¯Ù†Ù‰)
â”‚  â”‚  â”‚  â”œâ”€ storage/        # Storage adapters: sqlite | memory
â”‚  â”‚  â”‚  â””â”€ plugins/        # Plugin interfaces (Ø§Ø®ØªÙŠØ§Ø±ÙŠØ©)
â”‚  â”‚  â”œâ”€ index.ts
â”‚  â”‚  â””â”€ package.json
â”‚  â”‚
â”‚  â”œâ”€ server/               # @waqtor/server â† REST + WS + Webhooks
â”‚  â”‚  â”œâ”€ src/
â”‚  â”‚  â”‚  â”œâ”€ api/            # Routes: /messages, /campaigns, /status, /webhooks
â”‚  â”‚  â”‚  â”œâ”€ ws/             # WebSocket 2.0 namespaces
â”‚  â”‚  â”‚  â”œâ”€ middleware/     # Auth, Rate limiting, CORS
â”‚  â”‚  â”‚  â””â”€ bootstrap.ts    # Dependency Injection (ÙŠØ­Ù‚Ù† Core)
â”‚  â”‚  â”œâ”€ index.ts
â”‚  â”‚  â””â”€ package.json
â”‚  â”‚
â”‚  â”œâ”€ sdk-node/             # @waqtor/sdk (Node.js SDK)
â”‚  â”‚  â”œâ”€ src/
â”‚  â”‚  â”‚  â”œâ”€ client.ts       # WaqtorClient class
â”‚  â”‚  â”‚  â”œâ”€ types.ts        # TypeScript definitions
â”‚  â”‚  â”‚  â””â”€ utils.ts        # Helper functions
â”‚  â”‚  â”œâ”€ index.ts
â”‚  â”‚  â””â”€ package.json
â”‚  â”‚
â”‚  â””â”€ sdk-py/               # waqtor (Python SDK)
â”‚     â”œâ”€ waqtor/
â”‚     â”‚  â”œâ”€ __init__.py
â”‚     â”‚  â”œâ”€ client.py       # WaqtorClient class
â”‚     â”‚  â””â”€ types.py        # Type hints
â”‚     â”œâ”€ setup.py
â”‚     â””â”€ README.md
â”‚
â””â”€ apps/
   â”œâ”€ dashboard/            # Next.js 14 (Sakai Theme)
   â”‚  â””â”€ (current structure)
   â”‚
   â””â”€ examples/
      â”œâ”€ basic-bot/
      â”œâ”€ campaign-scheduler/
      â””â”€ webhook-handler/
```

---

### **ğŸ”’ Ø­Ø¯ÙˆØ¯ Ø§Ù„Ù†Ø¸Ø§ÙØ© (Separation of Concerns):**

#### **1. @waqtor/core** (Ø§Ù„Ù…Ø­Ø±Ùƒ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ)
```typescript
// âœ… Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ÙŠØ§Øª:
- Ø¥Ø¯Ø§Ø±Ø© Ø¬Ù„Ø³Ø© WhatsApp (SessionManager)
- Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø£Ø­Ø¯Ø§Ø« (EventBus)
- Ø¥Ø±Ø³Ø§Ù„/Ø§Ø³ØªÙ‚Ø¨Ø§Ù„ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„
- Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø­Ù…Ù„Ø§Øª (Campaign Engine)
- Storage abstraction

// âŒ Ù„Ø§ ÙŠØ¹Ø±Ù Ø´ÙŠØ¦Ø§Ù‹ Ø¹Ù†:
- Express.js
- Next.js
- HTTP/REST
- WebSocket
- UI/Frontend
```

#### **2. @waqtor/server** (Ø·Ø¨Ù‚Ø© Ø§Ù„Ù€ API)
```typescript
// âœ… Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ÙŠØ§Øª:
- REST API endpoints
- WebSocket server
- Webhooks
- Authentication & Authorization
- Rate limiting
- CORS handling

// âŒ Ù„Ø§ ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰:
- UI components
- Frontend logic
- Direct WhatsApp logic (ÙŠØ³ØªÙ‡Ù„Ùƒ core ÙÙ‚Ø·)
```

#### **3. Dashboard** (Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø£Ù…Ø§Ù…ÙŠØ©)
```typescript
// âœ… Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ÙŠØ§Øª:
- UI/UX
- User interactions
- Data visualization
- Real-time updates

// âŒ Ù„Ø§ ÙŠØ¹Ø±Ù Ø´ÙŠØ¦Ø§Ù‹ Ø¹Ù†:
- WhatsApp internals
- Puppeteer
- Session management
- (ÙŠØ³ØªÙ‡Ù„Ùƒ REST/WS ÙÙ‚Ø·)
```

---

### **ğŸ“¡ ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø£Ø­Ø¯Ø§Ø« ÙˆØ§Ù„Ø£ÙˆØ§Ù…Ø± (Contracts):**

#### **Events** (ÙŠÙØ¨Ø«Ù‘Ù‡Ø§ `@waqtor/core`):
```typescript
type CoreEvents =
  | { 
      type: 'session.qr'; 
      data: { qr: string; timestamp: string } 
    }
  | { 
      type: 'session.status'; 
      data: { 
        status: 'ready' | 'disconnected' | 'auth_failure' | 'connecting'; 
        timestamp: string;
        clientInfo?: {
          platform: string;
          phoneNumber: string;
          name: string;
        }
      } 
    }
  | { 
      type: 'message.received'; 
      data: { 
        from: string; 
        body: string; 
        timestamp: string;
        messageId: string;
        isGroup: boolean;
      } 
    }
  | { 
      type: 'message.sent'; 
      data: { 
        to: string; 
        messageId: string; 
        timestamp: string;
        status: 'pending' | 'sent' | 'delivered' | 'read' | 'failed';
      } 
    }
  | { 
      type: 'campaign.progress'; 
      data: { 
        campaignId: string; 
        sent: number; 
        total: number; 
        failed: number;
        status: 'running' | 'paused' | 'completed' | 'failed';
      } 
    }
  | {
      type: 'smartbot.reply';
      data: {
        to: string;
        trigger: string;
        response: string;
        timestamp: string;
      }
    };
```

#### **Commands** (ÙŠØ³ØªÙ‚Ø¨Ù„Ù‡Ø§ `@waqtor/core`):
```typescript
interface CoreCommands {
  // Message Commands
  sendText(params: {
    chatId: string;
    text: string;
    options?: {
      quotedMessageId?: string;
      mentionedIds?: string[];
    };
  }): Promise<{ messageId: string; timestamp: string }>;

  sendMedia(params: {
    chatId: string;
    media: string | Buffer;
    type: 'image' | 'video' | 'audio' | 'document';
    caption?: string;
    filename?: string;
  }): Promise<{ messageId: string; timestamp: string }>;

  // Campaign Commands
  createCampaign(params: {
    name: string;
    recipients: string[];
    template: string;
    variables?: Record<string, any>;
    scheduleAt?: Date;
  }): Promise<{ campaignId: string }>;

  controlCampaign(params: {
    campaignId: string;
    action: 'pause' | 'resume' | 'cancel';
  }): Promise<{ status: string }>;

  // Session Commands
  getSessionState(): Promise<{
    status: 'ready' | 'disconnected' | 'connecting';
    clientInfo?: ClientInfo;
  }>;

  logout(): Promise<void>;
  
  restartSession(): Promise<void>;
}
```

---

### **ğŸ”Œ Plugin System (Ø§Ø®ØªÙŠØ§Ø±ÙŠ):**

```typescript
// @waqtor/core/src/plugins/interface.ts
interface WaqtorPlugin {
  name: string;
  version: string;
  
  // Lifecycle hooks
  onLoad?(core: WaqtorCore): void;
  onMessage?(message: Message): void | Promise<void>;
  onSessionChange?(status: SessionStatus): void;
  
  // Custom commands
  commands?: Record<string, PluginCommand>;
}

// Example: SmartBot Plugin
class SmartBotPlugin implements WaqtorPlugin {
  name = 'smartbot';
  version = '1.0.0';
  
  async onMessage(message: Message) {
    const reply = await this.matchRule(message.body);
    if (reply) {
      await message.reply(reply);
    }
  }
  
  private async matchRule(text: string): Promise<string | null> {
    // Smart matching logic
  }
}
```

---

### **ğŸ“š SDK Examples:**

#### **Node.js SDK (@waqtor/sdk):**
```typescript
import { WaqtorClient } from '@waqtor/sdk';

const client = new WaqtorClient({
  apiUrl: 'http://localhost:8080',
  apiKey: 'your_api_key_here'
});

// Send message
await client.messages.send({
  to: '966501234567@c.us',
  text: 'Hello from Waqtor SDK!'
});

// Listen to events
client.on('message.received', (data) => {
  console.log('New message:', data);
});

// Create campaign
const campaign = await client.campaigns.create({
  name: 'New Year Sale',
  recipients: ['966501234567@c.us', '966501234568@c.us'],
  template: 'Happy New Year! Get {{discount}}% off!',
  variables: { discount: 50 }
});
```

#### **Python SDK (waqtor):**
```python
from waqtor import WaqtorClient

client = WaqtorClient(
    api_url='http://localhost:8080',
    api_key='your_api_key_here'
)

# Send message
client.messages.send(
    to='966501234567@c.us',
    text='Hello from Waqtor Python SDK!'
)

# Listen to events
@client.on('message.received')
def on_message(data):
    print(f"New message: {data}")

# Create campaign
campaign = client.campaigns.create(
    name='New Year Sale',
    recipients=['966501234567@c.us', '966501234568@c.us'],
    template='Happy New Year! Get {{discount}}% off!',
    variables={'discount': 50}
)
```

---

### **ğŸ”„ Migration Path (Ø®Ø·Ø© Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„):**

#### **Phase 1: Refactor Core** (4-6 Ø£Ø³Ø§Ø¨ÙŠØ¹)
- [ ] Ø§Ø³ØªØ®Ø±Ø§Ø¬ `@waqtor/core` Ù…Ù† Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø­Ø§Ù„ÙŠ
- [ ] ØªØ·Ø¨ÙŠÙ‚ EventBus pattern
- [ ] ØªØ¹Ø±ÙŠÙ Contracts (Events + Commands)
- [ ] Unit tests Ù„Ù„Ù€ core
- [ ] Documentation

#### **Phase 2: Isolate Server** (2-3 Ø£Ø³Ø§Ø¨ÙŠØ¹)
- [ ] Ù†Ù‚Ù„ REST API Ø¥Ù„Ù‰ `@waqtor/server`
- [ ] Dependency Injection Ù„Ù„Ù€ core
- [ ] WebSocket refactoring
- [ ] Integration tests
- [ ] API versioning (v1, v2)

#### **Phase 3: Build SDKs** (3-4 Ø£Ø³Ø§Ø¨ÙŠØ¹)
- [ ] ØªØ·ÙˆÙŠØ± `@waqtor/sdk` (Node.js)
- [ ] ØªØ·ÙˆÙŠØ± `waqtor` (Python)
- [ ] TypeScript definitions
- [ ] SDK documentation
- [ ] Example projects

#### **Phase 4: Dashboard Migration** (1-2 Ø£Ø³Ø§Ø¨ÙŠØ¹)
- [ ] Ø§Ø³ØªØ®Ø¯Ø§Ù… SDK Ø¨Ø¯Ù„Ø§Ù‹ Ù…Ù† Axios Ù…Ø¨Ø§Ø´Ø±Ø©
- [ ] ØªØ­Ø¯ÙŠØ« WebSocket client
- [ ] Testing & validation
- [ ] Performance optimization

#### **Phase 5: Multi-Instance Support** (2-3 Ø£Ø³Ø§Ø¨ÙŠØ¹)
- [ ] Instance Manager
- [ ] Database per instance
- [ ] Load balancing
- [ ] Monitoring & health checks

---

### **ğŸ“Š Benefits (Ø§Ù„ÙÙˆØ§Ø¦Ø¯):**

#### **1. Maintainability (Ø³Ù‡ÙˆÙ„Ø© Ø§Ù„ØµÙŠØ§Ù†Ø©)**
- âœ… ÙƒÙ„ package Ù„Ù‡ Ù…Ø³Ø¤ÙˆÙ„ÙŠØ© ÙˆØ§Ø­Ø¯Ø©
- âœ… ØªØ­Ø¯ÙŠØ«Ø§Øª Ù…Ø¹Ø²ÙˆÙ„Ø© (update core Ø¨Ø¯ÙˆÙ† ØªØ£Ø«ÙŠØ± Ø¹Ù„Ù‰ server)
- âœ… Testing Ø£Ø³Ù‡Ù„ (unit tests per package)

#### **2. Scalability (Ù‚Ø§Ø¨Ù„ÙŠØ© Ø§Ù„ØªÙˆØ³Ø¹)**
- âœ… Multi-instance support
- âœ… Horizontal scaling
- âœ… Plugin system Ù„Ù„Ù…ÙŠØ²Ø§Øª Ø§Ù„Ø¥Ø¶Ø§ÙÙŠØ©

#### **3. Developer Experience**
- âœ… SDK Ø±Ø³Ù…ÙŠ Ù„Ù„Ù…Ø·ÙˆØ±ÙŠÙ†
- âœ… TypeScript support ÙƒØ§Ù…Ù„
- âœ… Documentation ÙˆØ§Ø¶Ø­Ø©
- âœ… Examples Ø¬Ø§Ù‡Ø²Ø©

#### **4. Backward Compatibility**
- âœ… Ø§Ù„Ù€ API Ø§Ù„Ø­Ø§Ù„ÙŠ ÙŠØ¨Ù‚Ù‰ ÙƒÙ…Ø§ Ù‡Ùˆ
- âœ… Dashboard ÙŠØ¹Ù…Ù„ Ø¨Ø¯ÙˆÙ† ØªØºÙŠÙŠØ±Ø§Øª
- âœ… Migration ØªØ¯Ø±ÙŠØ¬ÙŠØ© (phased approach)

---

### **ğŸ§ª Testing Strategy:**

```typescript
// @waqtor/core tests
describe('SessionManager', () => {
  it('should emit qr event on initialization', async () => {
    const manager = new SessionManager();
    const qrPromise = new Promise(resolve => {
      manager.on('session.qr', resolve);
    });
    
    await manager.initialize();
    const qrData = await qrPromise;
    
    expect(qrData).toHaveProperty('qr');
  });
});

// @waqtor/server tests
describe('POST /api/messages/send-text', () => {
  it('should send message and return messageId', async () => {
    const response = await request(app)
      .post('/api/messages/send-text')
      .set('X-API-Key', 'test_key')
      .send({
        chatId: '966501234567@c.us',
        text: 'Test message'
      });
    
    expect(response.status).toBe(200);
    expect(response.body).toHaveProperty('messageId');
  });
});

// @waqtor/sdk tests
describe('WaqtorClient', () => {
  it('should send message via SDK', async () => {
    const client = new WaqtorClient({ apiKey: 'test' });
    const result = await client.messages.send({
      to: '966501234567@c.us',
      text: 'SDK test'
    });
    
    expect(result).toHaveProperty('messageId');
  });
});
```

---

### **ğŸ“ Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©:**

```
ğŸ“ packages/core/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ engine/
â”‚   â”‚   â”œâ”€â”€ WhatsAppClient.ts
â”‚   â”‚   â”œâ”€â”€ SessionManager.ts
â”‚   â”‚   â””â”€â”€ EventBus.ts
â”‚   â”œâ”€â”€ campaigns/
â”‚   â”‚   â”œâ”€â”€ CampaignEngine.ts
â”‚   â”‚   â””â”€â”€ CampaignScheduler.ts
â”‚   â”œâ”€â”€ storage/
â”‚   â”‚   â”œâ”€â”€ StorageAdapter.ts
â”‚   â”‚   â”œâ”€â”€ SQLiteAdapter.ts
â”‚   â”‚   â””â”€â”€ MemoryAdapter.ts
â”‚   â”œâ”€â”€ plugins/
â”‚   â”‚   â”œâ”€â”€ PluginInterface.ts
â”‚   â”‚   â””â”€â”€ PluginManager.ts
â”‚   â”œâ”€â”€ types/
â”‚   â”‚   â”œâ”€â”€ events.ts
â”‚   â”‚   â””â”€â”€ commands.ts
â”‚   â””â”€â”€ index.ts
â”œâ”€â”€ tests/
â”œâ”€â”€ package.json
â””â”€â”€ README.md

ğŸ“ packages/server/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”œâ”€â”€ messages.ts
â”‚   â”‚   â”œâ”€â”€ campaigns.ts
â”‚   â”‚   â”œâ”€â”€ status.ts
â”‚   â”‚   â””â”€â”€ webhooks.ts
â”‚   â”œâ”€â”€ ws/
â”‚   â”‚   â””â”€â”€ websocket.ts
â”‚   â”œâ”€â”€ middleware/
â”‚   â”‚   â”œâ”€â”€ auth.ts
â”‚   â”‚   â”œâ”€â”€ rateLimit.ts
â”‚   â”‚   â””â”€â”€ cors.ts
â”‚   â”œâ”€â”€ bootstrap.ts
â”‚   â””â”€â”€ index.ts
â”œâ”€â”€ tests/
â”œâ”€â”€ package.json
â””â”€â”€ README.md

ğŸ“ packages/sdk-node/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ client.ts
â”‚   â”œâ”€â”€ resources/
â”‚   â”‚   â”œâ”€â”€ messages.ts
â”‚   â”‚   â”œâ”€â”€ campaigns.ts
â”‚   â”‚   â””â”€â”€ status.ts
â”‚   â”œâ”€â”€ types.ts
â”‚   â””â”€â”€ index.ts
â”œâ”€â”€ tests/
â”œâ”€â”€ examples/
â”œâ”€â”€ package.json
â””â”€â”€ README.md

ğŸ“ packages/sdk-py/
â”œâ”€â”€ waqtor/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ client.py
â”‚   â”œâ”€â”€ resources/
â”‚   â”‚   â”œâ”€â”€ messages.py
â”‚   â”‚   â”œâ”€â”€ campaigns.py
â”‚   â”‚   â””â”€â”€ status.py
â”‚   â””â”€â”€ types.py
â”œâ”€â”€ tests/
â”œâ”€â”€ examples/
â”œâ”€â”€ setup.py
â””â”€â”€ README.md
```

---

### **â±ï¸ Timeline (Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø²Ù…Ù†ÙŠ):**

| Phase | Duration | Deliverables |
|-------|----------|--------------|
| **Phase 1** | 4-6 weeks | `@waqtor/core` package |
| **Phase 2** | 2-3 weeks | `@waqtor/server` package |
| **Phase 3** | 3-4 weeks | SDKs (Node + Python) |
| **Phase 4** | 1-2 weeks | Dashboard migration |
| **Phase 5** | 2-3 weeks | Multi-instance support |
| **Total** | **12-18 weeks** | Full modular architecture |

---

### **ğŸ¯ Success Metrics:**

- âœ… **Code Coverage**: > 80% for all packages
- âœ… **API Compatibility**: 100% backward compatible
- âœ… **Performance**: No regression in response times
- âœ… **Bundle Size**: Core < 500KB, SDK < 100KB
- âœ… **Documentation**: 100% API coverage
- âœ… **Developer Adoption**: 10+ community projects using SDK

---

## ğŸ”Œ **Ø§Ù„Ù…Ø±Ø­Ù„Ø© 9ï¸âƒ£: Integration Layer - WebSocket 2.0 (Event-Driven + Namespaces)**

### **ğŸ¯ Ø§Ù„Ø£Ù‡Ø¯Ø§Ù:**
- âœ… ØªÙ†Ø¸ÙŠÙ… Ø§Ù„Ù‚Ù†ÙˆØ§Øª Ø¹Ø¨Ø± Namespaces
- âœ… Heartbeat + Auto-Reconnect
- âœ… Backpressure handling Ù„Ù„Ø­Ù…Ù„Ø§Øª Ø§Ù„ÙƒØ«ÙŠÙØ©
- âœ… Reliable real-time communication
- âœ… Better error handling & recovery

---

### **ğŸ“¡ WebSocket Architecture:**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Backend (@waqtor/server)                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚              Socket.io Server                         â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚  â”‚
â”‚  â”‚  â”‚ /status    â”‚  â”‚ /campaigns â”‚  â”‚ /smartbot  â”‚     â”‚  â”‚
â”‚  â”‚  â”‚ namespace  â”‚  â”‚ namespace  â”‚  â”‚ namespace  â”‚     â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚           â”‚               â”‚               â”‚                â”‚
â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â”‚                           â”‚                                â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”                         â”‚
â”‚                    â”‚  EventBus   â”‚                         â”‚
â”‚                    â”‚  (@waqtor/  â”‚                         â”‚
â”‚                    â”‚   core)     â”‚                         â”‚
â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â–²
                            â”‚ WebSocket
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Frontend (Dashboard)                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚           Socket.io Client (Multiple Namespaces)     â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚  â”‚
â”‚  â”‚  â”‚ /status    â”‚  â”‚ /campaigns â”‚  â”‚ /smartbot  â”‚     â”‚  â”‚
â”‚  â”‚  â”‚ client     â”‚  â”‚ client     â”‚  â”‚ client     â”‚     â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚           â”‚               â”‚               â”‚                â”‚
â”‚           â–¼               â–¼               â–¼                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚              Zustand Store / Context                  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### **ğŸ”§ Server Implementation (@waqtor/server):**

#### **1. WebSocket Server Setup:**

```typescript
// ws/index.ts
import { Server } from 'socket.io';
import { EventBus } from '@waqtor/core';

export function setupWebSocket(httpServer: any, eventBus: EventBus) {
  const io = new Server(httpServer, {
    cors: {
      origin: process.env.DASHBOARD_URL || 'http://localhost:3000',
      credentials: true
    },
    transports: ['websocket', 'polling'],
    pingInterval: 15000,      // Heartbeat every 15s
    pingTimeout: 10000,       // Timeout after 10s
    maxHttpBufferSize: 1e6    // 1MB max message size
  });

  // Middleware: Authentication
  io.use((socket, next) => {
    const token = socket.handshake.auth.token;
    if (isValidToken(token)) {
      next();
    } else {
      next(new Error('Authentication failed'));
    }
  });

  // Setup namespaces
  setupStatusNamespace(io, eventBus);
  setupCampaignsNamespace(io, eventBus);
  setupSmartBotNamespace(io, eventBus);

  return io;
}
```

#### **2. Status Namespace (/status):**

```typescript
// ws/namespaces/status.ts
import { Namespace } from 'socket.io';
import { EventBus } from '@waqtor/core';

export function setupStatusNamespace(io: Server, bus: EventBus) {
  const statusNs = io.of('/status');

  statusNs.on('connection', (socket) => {
    console.log(`[/status] Client connected: ${socket.id}`);

    // Send current state immediately
    socket.emit('status', {
      status: bus.getSessionStatus(),
      timestamp: new Date().toISOString()
    });

    // Listen to core events
    const qrHandler = (event: any) => {
      socket.emit('qr', {
        qr: event.data.qr,
        timestamp: event.data.timestamp
      });
    };

    const statusHandler = (event: any) => {
      socket.emit('status', {
        status: event.data.status,
        clientInfo: event.data.clientInfo,
        timestamp: event.data.timestamp
      });
    };

    const statsHandler = (event: any) => {
      socket.emit('stats', {
        messagesSent: event.data.sent,
        messagesReceived: event.data.received,
        timestamp: event.data.timestamp
      });
    };

    // Register handlers
    bus.on('session.qr', qrHandler);
    bus.on('session.status', statusHandler);
    bus.on('session.stats', statsHandler);

    // Cleanup on disconnect
    socket.on('disconnect', () => {
      console.log(`[/status] Client disconnected: ${socket.id}`);
      bus.off('session.qr', qrHandler);
      bus.off('session.status', statusHandler);
      bus.off('session.stats', statsHandler);
    });

    // Heartbeat monitoring
    socket.on('ping', () => {
      socket.emit('pong', { timestamp: Date.now() });
    });
  });
}
```

#### **3. Campaigns Namespace (/campaigns):**

```typescript
// ws/namespaces/campaigns.ts
import { Namespace } from 'socket.io';
import { EventBus } from '@waqtor/core';

export function setupCampaignsNamespace(io: Server, bus: EventBus) {
  const campaignsNs = io.of('/campaigns');

  // Backpressure queue
  const messageQueue: any[] = [];
  const MAX_BROADCAST_RATE = 100; // messages per second
  let lastBroadcast = Date.now();

  campaignsNs.on('connection', (socket) => {
    console.log(`[/campaigns] Client connected: ${socket.id}`);

    // Campaign progress with backpressure
    const progressHandler = (event: any) => {
      const now = Date.now();
      const timeSinceLastBroadcast = now - lastBroadcast;

      if (timeSinceLastBroadcast < (1000 / MAX_BROADCAST_RATE)) {
        // Queue the message
        messageQueue.push({ event: 'progress', data: event.data });
      } else {
        // Broadcast immediately
        socket.emit('progress', {
          campaignId: event.data.campaignId,
          sent: event.data.sent,
          total: event.data.total,
          failed: event.data.failed,
          status: event.data.status,
          timestamp: event.data.timestamp
        });
        lastBroadcast = now;
      }
    };

    const completedHandler = (event: any) => {
      socket.emit('completed', {
        campaignId: event.data.campaignId,
        totalSent: event.data.sent,
        totalFailed: event.data.failed,
        duration: event.data.duration,
        timestamp: event.data.timestamp
      });
    };

    // Register handlers
    bus.on('campaign.progress', progressHandler);
    bus.on('campaign.completed', completedHandler);

    // Process queued messages
    const queueInterval = setInterval(() => {
      if (messageQueue.length > 0) {
        const batch = messageQueue.splice(0, 10); // Send 10 at a time
        batch.forEach(msg => socket.emit(msg.event, msg.data));
      }
    }, 100);

    // Cleanup
    socket.on('disconnect', () => {
      console.log(`[/campaigns] Client disconnected: ${socket.id}`);
      bus.off('campaign.progress', progressHandler);
      bus.off('campaign.completed', completedHandler);
      clearInterval(queueInterval);
    });
  });
}
```

#### **4. SmartBot Namespace (/smartbot):**

```typescript
// ws/namespaces/smartbot.ts
import { Namespace } from 'socket.io';
import { EventBus } from '@waqtor/core';

export function setupSmartBotNamespace(io: Server, bus: EventBus) {
  const smartbotNs = io.of('/smartbot');

  smartbotNs.on('connection', (socket) => {
    console.log(`[/smartbot] Client connected: ${socket.id}`);

    // Incoming messages
    const messageHandler = (event: any) => {
      socket.emit('incoming', {
        from: event.data.from,
        body: event.data.body,
        messageId: event.data.messageId,
        isGroup: event.data.isGroup,
        timestamp: event.data.timestamp
      });
    };

    // SmartBot replies
    const replyHandler = (event: any) => {
      socket.emit('reply', {
        to: event.data.to,
        trigger: event.data.trigger,
        response: event.data.response,
        timestamp: event.data.timestamp
      });
    };

    // Rule updates
    const ruleUpdateHandler = (event: any) => {
      socket.emit('rule-updated', {
        ruleId: event.data.ruleId,
        action: event.data.action, // 'created' | 'updated' | 'deleted'
        timestamp: event.data.timestamp
      });
    };

    // Register handlers
    bus.on('message.received', messageHandler);
    bus.on('smartbot.reply', replyHandler);
    bus.on('smartbot.rule-updated', ruleUpdateHandler);

    // Cleanup
    socket.on('disconnect', () => {
      console.log(`[/smartbot] Client disconnected: ${socket.id}`);
      bus.off('message.received', messageHandler);
      bus.off('smartbot.reply', replyHandler);
      bus.off('smartbot.rule-updated', ruleUpdateHandler);
    });
  });
}
```

---

### **ğŸ’» Client Implementation (Dashboard):**

#### **1. WebSocket Hook:**

```typescript
// hooks/useWebSocket.ts
import { useEffect, useRef, useState } from 'react';
import { io, Socket } from 'socket.io-client';

interface UseWebSocketOptions {
  namespace: string;
  autoConnect?: boolean;
  onConnect?: () => void;
  onDisconnect?: () => void;
  onError?: (error: Error) => void;
}

export function useWebSocket(options: UseWebSocketOptions) {
  const { namespace, autoConnect = true, onConnect, onDisconnect, onError } = options;
  
  const [isConnected, setIsConnected] = useState(false);
  const [latency, setLatency] = useState<number>(0);
  const socketRef = useRef<Socket | null>(null);

  useEffect(() => {
    const WS_URL = process.env.NEXT_PUBLIC_WS_URL || 'http://localhost:8080';
    const token = localStorage.getItem('api_key');

    const socket = io(`${WS_URL}${namespace}`, {
      transports: ['websocket'],
      auth: { token },
      reconnection: true,
      reconnectionDelay: 1000,
      reconnectionDelayMax: 5000,
      reconnectionAttempts: Infinity
    });

    socketRef.current = socket;

    // Connection events
    socket.on('connect', () => {
      console.log(`[${namespace}] Connected`);
      setIsConnected(true);
      onConnect?.();
    });

    socket.on('disconnect', (reason) => {
      console.log(`[${namespace}] Disconnected:`, reason);
      setIsConnected(false);
      onDisconnect?.();
    });

    socket.on('connect_error', (error) => {
      console.error(`[${namespace}] Connection error:`, error);
      onError?.(error);
    });

    // Heartbeat
    const heartbeatInterval = setInterval(() => {
      const start = Date.now();
      socket.emit('ping');
      
      socket.once('pong', () => {
        const latency = Date.now() - start;
        setLatency(latency);
      });
    }, 15000);

    // Cleanup
    return () => {
      clearInterval(heartbeatInterval);
      socket.disconnect();
    };
  }, [namespace, onConnect, onDisconnect, onError]);

  const emit = (event: string, data: any) => {
    socketRef.current?.emit(event, data);
  };

  const on = (event: string, handler: (...args: any[]) => void) => {
    socketRef.current?.on(event, handler);
  };

  const off = (event: string, handler?: (...args: any[]) => void) => {
    socketRef.current?.off(event, handler);
  };

  return {
    socket: socketRef.current,
    isConnected,
    latency,
    emit,
    on,
    off
  };
}
```

#### **2. Status WebSocket (Dashboard):**

```typescript
// hooks/useStatusWebSocket.ts
import { useEffect } from 'react';
import { useWebSocket } from './useWebSocket';
import { useAppStore } from '@/store/useAppStore';

export function useStatusWebSocket() {
  const { setQrCode, setSessionStatus, setClientInfo, setStats } = useAppStore();

  const { isConnected, latency, on, off } = useWebSocket({
    namespace: '/status',
    onConnect: () => {
      console.log('Status WebSocket connected');
    },
    onDisconnect: () => {
      console.log('Status WebSocket disconnected');
    }
  });

  useEffect(() => {
    // QR Code updates
    const handleQr = (data: any) => {
      setQrCode(data.qr);
    };

    // Status updates
    const handleStatus = (data: any) => {
      setSessionStatus(data.status);
      if (data.clientInfo) {
        setClientInfo(data.clientInfo);
      }
    };

    // Stats updates
    const handleStats = (data: any) => {
      setStats({
        sent: data.messagesSent,
        received: data.messagesReceived
      });
    };

    // Register listeners
    on('qr', handleQr);
    on('status', handleStatus);
    on('stats', handleStats);

    // Cleanup
    return () => {
      off('qr', handleQr);
      off('status', handleStatus);
      off('stats', handleStats);
    };
  }, [on, off, setQrCode, setSessionStatus, setClientInfo, setStats]);

  return { isConnected, latency };
}
```

#### **3. Campaigns WebSocket:**

```typescript
// hooks/useCampaignsWebSocket.ts
import { useEffect } from 'react';
import { useWebSocket } from './useWebSocket';
import { useCampaignStore } from '@/store/useCampaignStore';

export function useCampaignsWebSocket() {
  const { updateCampaignProgress, markCampaignCompleted } = useCampaignStore();

  const { isConnected, on, off } = useWebSocket({
    namespace: '/campaigns'
  });

  useEffect(() => {
    const handleProgress = (data: any) => {
      updateCampaignProgress(data.campaignId, {
        sent: data.sent,
        total: data.total,
        failed: data.failed,
        status: data.status
      });
    };

    const handleCompleted = (data: any) => {
      markCampaignCompleted(data.campaignId, {
        totalSent: data.totalSent,
        totalFailed: data.totalFailed,
        duration: data.duration
      });
    };

    on('progress', handleProgress);
    on('completed', handleCompleted);

    return () => {
      off('progress', handleProgress);
      off('completed', handleCompleted);
    };
  }, [on, off, updateCampaignProgress, markCampaignCompleted]);

  return { isConnected };
}
```

#### **4. SmartBot WebSocket:**

```typescript
// hooks/useSmartBotWebSocket.ts
import { useEffect } from 'react';
import { useWebSocket } from './useWebSocket';
import { useSmartBotStore } from '@/store/useSmartBotStore';

export function useSmartBotWebSocket() {
  const { addIncomingMessage, addReply, updateRule } = useSmartBotStore();

  const { isConnected, on, off } = useWebSocket({
    namespace: '/smartbot'
  });

  useEffect(() => {
    const handleIncoming = (data: any) => {
      addIncomingMessage({
        from: data.from,
        body: data.body,
        messageId: data.messageId,
        isGroup: data.isGroup,
        timestamp: new Date(data.timestamp)
      });
    };

    const handleReply = (data: any) => {
      addReply({
        to: data.to,
        trigger: data.trigger,
        response: data.response,
        timestamp: new Date(data.timestamp)
      });
    };

    const handleRuleUpdate = (data: any) => {
      updateRule(data.ruleId, data.action);
    };

    on('incoming', handleIncoming);
    on('reply', handleReply);
    on('rule-updated', handleRuleUpdate);

    return () => {
      off('incoming', handleIncoming);
      off('reply', handleReply);
      off('rule-updated', handleRuleUpdate);
    };
  }, [on, off, addIncomingMessage, addReply, updateRule]);

  return { isConnected };
}
```

---

### **ğŸ“Š Connection Status Component:**

```typescript
// components/WebSocketStatus.tsx
'use client';

import { Badge } from 'primereact/badge';
import { useStatusWebSocket } from '@/hooks/useStatusWebSocket';

export function WebSocketStatus() {
  const { isConnected, latency } = useStatusWebSocket();

  return (
    <div className="flex align-items-center gap-2">
      <i 
        className={`pi ${isConnected ? 'pi-wifi' : 'pi-wifi-slash'}`}
        style={{ color: isConnected ? '#16a34a' : '#ef4444' }}
      />
      <Badge 
        value={isConnected ? `${latency}ms` : 'Offline'} 
        severity={isConnected ? 'success' : 'danger'}
      />
    </div>
  );
}
```

---

### **ğŸ”„ Auto-Reconnect Strategy:**

```typescript
// utils/websocket-reconnect.ts
export class WebSocketReconnectManager {
  private reconnectAttempts = 0;
  private maxReconnectAttempts = Infinity;
  private reconnectDelay = 1000;
  private maxReconnectDelay = 30000;

  calculateDelay(): number {
    // Exponential backoff with jitter
    const delay = Math.min(
      this.reconnectDelay * Math.pow(2, this.reconnectAttempts),
      this.maxReconnectDelay
    );
    
    const jitter = Math.random() * 1000;
    return delay + jitter;
  }

  onReconnectAttempt() {
    this.reconnectAttempts++;
    console.log(`Reconnect attempt ${this.reconnectAttempts}`);
  }

  onReconnectSuccess() {
    this.reconnectAttempts = 0;
    console.log('Reconnected successfully');
  }

  shouldReconnect(): boolean {
    return this.reconnectAttempts < this.maxReconnectAttempts;
  }
}
```

---

### **ğŸ“ Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©:**

```
ğŸ“ packages/server/src/ws/
â”œâ”€â”€ index.ts                    # WebSocket server setup
â”œâ”€â”€ namespaces/
â”‚   â”œâ”€â”€ status.ts               # /status namespace
â”‚   â”œâ”€â”€ campaigns.ts            # /campaigns namespace
â”‚   â””â”€â”€ smartbot.ts             # /smartbot namespace
â”œâ”€â”€ middleware/
â”‚   â”œâ”€â”€ auth.ts                 # Socket authentication
â”‚   â””â”€â”€ rateLimit.ts            # Rate limiting per socket
â””â”€â”€ utils/
    â”œâ”€â”€ backpressure.ts         # Backpressure queue
    â””â”€â”€ heartbeat.ts            # Heartbeat monitoring

ğŸ“ dashboard/src/hooks/
â”œâ”€â”€ useWebSocket.ts             # Base WebSocket hook
â”œâ”€â”€ useStatusWebSocket.ts       # Status namespace hook
â”œâ”€â”€ useCampaignsWebSocket.ts    # Campaigns namespace hook
â””â”€â”€ useSmartBotWebSocket.ts     # SmartBot namespace hook

ğŸ“ dashboard/src/components/
â””â”€â”€ WebSocketStatus.tsx         # Connection status indicator

ğŸ“ dashboard/src/utils/
â””â”€â”€ websocket-reconnect.ts      # Reconnection manager
```

---

### **âš™ï¸ Configuration:**

```typescript
// .env (Server)
WS_PORT=8080
WS_PING_INTERVAL=15000
WS_PING_TIMEOUT=10000
WS_MAX_BUFFER_SIZE=1048576
DASHBOARD_URL=http://localhost:3000

// .env (Dashboard)
NEXT_PUBLIC_WS_URL=ws://localhost:8080
NEXT_PUBLIC_WS_RECONNECT_DELAY=1000
NEXT_PUBLIC_WS_MAX_RECONNECT_DELAY=30000
```

---

### **ğŸ¯ Benefits (Ø§Ù„ÙÙˆØ§Ø¦Ø¯):**

#### **1. Organization (Ø§Ù„ØªÙ†Ø¸ÙŠÙ…)**
- âœ… Namespaces Ù…Ù†ÙØµÙ„Ø© Ù„ÙƒÙ„ feature
- âœ… Event isolation (Ù„Ø§ ØªØ¯Ø§Ø®Ù„ Ø¨ÙŠÙ† Ø§Ù„Ø£Ø­Ø¯Ø§Ø«)
- âœ… Easier debugging

#### **2. Performance (Ø§Ù„Ø£Ø¯Ø§Ø¡)**
- âœ… Backpressure handling Ù„Ù„Ø­Ù…Ù„Ø§Øª Ø§Ù„ÙƒØ«ÙŠÙØ©
- âœ… Message queuing
- âœ… Rate limiting per namespace

#### **3. Reliability (Ø§Ù„Ù…ÙˆØ«ÙˆÙ‚ÙŠØ©)**
- âœ… Auto-reconnect Ù…Ø¹ exponential backoff
- âœ… Heartbeat monitoring
- âœ… Connection status tracking
- âœ… Error recovery

#### **4. Developer Experience**
- âœ… Type-safe events
- âœ… Reusable hooks
- âœ… Clear separation of concerns
- âœ… Easy to test

---

### **ğŸ§ª Testing:**

```typescript
// tests/ws/status.test.ts
describe('Status Namespace', () => {
  it('should emit QR code on session.qr event', (done) => {
    const client = io('http://localhost:8080/status');
    
    client.on('qr', (data) => {
      expect(data).toHaveProperty('qr');
      expect(data).toHaveProperty('timestamp');
      client.disconnect();
      done();
    });
    
    // Trigger QR event from core
    eventBus.emit('session.qr', { qr: 'test_qr', timestamp: new Date() });
  });

  it('should handle heartbeat', (done) => {
    const client = io('http://localhost:8080/status');
    
    client.emit('ping');
    client.on('pong', (data) => {
      expect(data).toHaveProperty('timestamp');
      client.disconnect();
      done();
    });
  });
});
```

---

### **ğŸ“ˆ Monitoring:**

```typescript
// ws/monitoring.ts
export class WebSocketMonitor {
  private connections = new Map<string, number>();
  
  trackConnection(namespace: string) {
    const count = this.connections.get(namespace) || 0;
    this.connections.set(namespace, count + 1);
  }
  
  trackDisconnection(namespace: string) {
    const count = this.connections.get(namespace) || 0;
    this.connections.set(namespace, Math.max(0, count - 1));
  }
  
  getStats() {
    return {
      total: Array.from(this.connections.values()).reduce((a, b) => a + b, 0),
      byNamespace: Object.fromEntries(this.connections)
    };
  }
}
```

---

**Ø¬Ø§Ù‡Ø² Ù„Ù„Ø¨Ø¯Ø¡! ğŸš€**
